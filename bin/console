#!/usr/bin/env ruby

require "bundler/setup"
require "reverse/polish/suray/console_input_source"
require "reverse/polish/suray/console_output_source"
require "reverse/polish/suray/io_combo"
require "reverse/polish/suray/explanation_presenter"

# You can add fixtures and/or initialization code here to make experimenting
# with your gem easier. You can also use a different console, if you like.

#TODO move this into a controller?
def build_stars(string)
  stars = ''

  string.length.times do
    stars << '*'
  end

  stars
end

def display_greeting(io_combo)
  stars = build_stars(ExplanationPresenter.greeting)

  greeting_lines = [stars, ExplanationPresenter.greeting, stars, '']

  greeting_lines.each { |line| io_combo.output_info(line) }
end

def display_examples(io_combo)
    example_lines = ['Examples:', ExplanationPresenter.examples, ''].flatten
    example_lines.each { |line| io_combo.output_info(line) }
end

io_combo = IOCombo.new(ConsoleInputSource.new, ConsoleOutputSource.new)

display_greeting(io_combo)
display_examples(io_combo)

while true do
  io_combo.process_next_input
end




